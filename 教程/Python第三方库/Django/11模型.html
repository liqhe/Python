<!DOCTYPE html>
<!-- saved from url=(0060)https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/ -->
<html lang="zh-CN" class="mdzr-js mdzr-borderradius mdzr-boxshadow mdzr-cssanimations mdzr-svg translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="ROBOTS" content="ALL">
    <meta name="MSSmartTagsPreventParsing" content="true">
    <meta name="Copyright" content="Django Software Foundation">
    <meta name="keywords" content="Python, Django, framework, open-source">
    <meta name="description" content="">

    
  
    
      
    
  
  <link rel="canonical" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="el" href="https://docs.djangoproject.com/el/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="en" href="https://docs.djangoproject.com/en/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="es" href="https://docs.djangoproject.com/es/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="fr" href="https://docs.djangoproject.com/fr/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="id" href="https://docs.djangoproject.com/id/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="ja" href="https://docs.djangoproject.com/ja/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="ko" href="https://docs.djangoproject.com/ko/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="pl" href="https://docs.djangoproject.com/pl/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="pt-br" href="https://docs.djangoproject.com/pt-br/2.2/topics/db/models/">
  
    
      
    
    <link rel="alternate" hreflang="zh-hans" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/">
  

  <link rel="search" type="application/opensearchdescription+xml" href="https://docs.djangoproject.com/zh-hans/2.2/search/description/" title="Django文档">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="https://static.djangoproject.com/img/icon-touch.e4872c4da341.png">
    <link rel="icon" sizes="192x192" href="https://static.djangoproject.com/img/icon-touch.e4872c4da341.png">
    <link rel="shortcut icon" href="https://static.djangoproject.com/img/favicon.6dbf28c0650e.ico">
    <meta name="msapplication-TileColor" content="#113228">
    <meta name="msapplication-TileImage" content="https://static.djangoproject.com/img/icon-tile.b01ac0ef9f67.png">

    <title>模型|  Django文档|  Django的</title>

    <link rel="stylesheet" href="./11模型_files/output.beb34528fd55.css">
    <script src="./11模型_files/webfontloader.e75218f5f090.js"></script>
    <link rel="stylesheet" href="./11模型_files/css"><script>
    WebFont.load({
      custom: {
        families: ['FontAwesome', 'Fira+Mono'],
      },
      google: {
        families: ['Roboto:400italic,700italic,300,700,400:latin'
        ]
      },
      classes: false,
      events: false,
      timeout: 1000
    });
    </script>
    <script src="./11模型_files/modernizr.3b36762e418a.js"></script>
    
  <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="main.07884ebc4865" src="./11模型_files/main.07884ebc4865.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="mod/mobile-menu" src="./11模型_files/mobile-menu.841726ee903a.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="mod/version-switcher" src="./11模型_files/version-switcher.c28bb83972bb.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="mod/search-key" src="./11模型_files/search-key.f3c0a6fcfedd.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="mod/clippify" src="./11模型_files/clippify.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="clipboard" src="./11模型_files/clipboard.min.bd70fd596a23.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="jquery" src="./11模型_files/jquery.min.87e69028f78d.js"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="./11模型_files/translateelement.css"></head>

  <body id="generic" class="">

    <div role="banner" id="top">
  <div class="container">
    <a class="logo" href="https://www.djangoproject.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django的</font></font></a>
    <p class="meta"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完美主义者的网络框架与截止日期。</font></font></p>
    <div class="menu-button"><i class="icon icon-reorder"></i><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单</font></font></span></div><div role="navigation" class="nav-menu-on">
      <ul>
        <li>
          <a href="https://www.djangoproject.com/start/overview/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概观</font></font></a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/download/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载</font></font></a>
        </li>
        <li class="active">
          <a href="https://docs.djangoproject.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/weblog/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新闻</font></font></a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/community/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">社区</font></font></a>
        </li>
        <li>
          <a href="https://code.djangoproject.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">码</font></font></a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/foundation/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于</font></font></a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/fundraising/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">♥捐赠</font></font></a>
        </li>
      </ul>
    </div>
  </div>
</div>


    <div class="copy-banner">
      <div class="container">
        
  <h1><a href="https://docs.djangoproject.com/zh-hans/2.2/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></a></h1>

      </div>
    </div>
    <div id="billboard"></div>

    <div class="container sidebar-right">
      <div role="main">

        
          
        

        
<div id="version-switcher">
  <ul id="doc-languages" class="language-switcher">
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/el/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">埃尔</font></font></a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/en/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">恩</font></font></a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/es/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ES</font></font></a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/fr/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FR</font></font></a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/id/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/ja/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JA</font></font></a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/ko/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KO</font></font></a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/pl/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PL</font></font></a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/pt-br/2.2/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PT-BR</font></font></a>
  </li>
  
  
  
  
    <li class="current" title="点击左侧的链接以切换到另一种语言。">
      <span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语言：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zh-hans</font></font></strong></span>
    </li>
  </ul>

  
  <ul id="doc-versions" class="version-switcher">
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/zh-hans/2.0/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.0</font></font></a>
    </li>
    
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/zh-hans/2.1/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1</font></font></a>
    </li>
    
    
    
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/zh-hans/dev/topics/db/models/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发</font></font></a>
    </li>
    
    
    <li class="current" title="此文档是为Django 2.2编写的。点击左侧的链接查看其它版本">
       <span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档版本：
          </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2</font></font></strong>
       </span>
    </li>
  </ul>
</div>


<div id="docs-content">
<div class="section" id="s-module-django.db.models">
<span id="s-models"></span><span id="module-django.db.models"></span><span id="models"></span><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#module-django.db.models" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h1>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型是您的数据唯一而且准确的信息来源。它包含您正在储存的数据的重要字段和行为。一般来说，每一个模型都映射一个数据库表。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基础：</font></font></p>
<ul class="simple">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个模型都是一个Python的类，这些类继承 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model" title="django.db.models.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.Model</span></code></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型类的每个属性都相当于一个数据库的字段。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">综合上诉说，Django给你一个自动生成访问数据库的API;请参阅</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行查询</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul>
<div class="section" id="s-quick-example">
<span id="quick-example"></span><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上手快速</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#quick-example" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个样例模型定义了一个</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其拥有</font></font><code class="docutils literal notranslate"><span class="pre">first_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="docutils literal notranslate"><span class="pre">last_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">first_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状语从句：</font></font><code class="docutils literal notranslate"><span class="pre">last_name</span></code> <a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#fields"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的英文模型的字段</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。每个字段都被指定为一个类属性</font><font style="vertical-align: inherit;">，并且每个属性映射为一个数据库列。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的上面</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型会创建³³一个如下的数据库表：</font></font></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">myapp_person</span> <span class="p">(</span>
    <span class="ss">"id"</span> <span class="nb">serial</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="ss">"first_name"</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="ss">"last_name"</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">);</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些技术上的说明：</font></font></p>
<ul class="simple">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该表的名称“myapp_person”是自动从某些模型元数据中派生出来，但可以被改写。有关更多详细信息，请参阅：</font></font><span class="xref std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表命名</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><code class="docutils literal notranslate"><span class="pre">id</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。字段会被自动添加，但是这种行为可以被改写请参阅：</font></font><span class="xref std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认主键字段</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本示例中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">SQL使用PostgreSQL语法进行格式化，但值得注意的是Django使用针对</font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/settings/"><span class="doc"><font style="vertical-align: inherit;">设置文件中</font></span></a><font style="vertical-align: inherit;">指定的数据库后端定制的SQL </font><font style="vertical-align: inherit;">。</font></font><code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code><font style="vertical-align: inherit;"></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/settings/"><span class="doc"><font style="vertical-align: inherit;"></font></span></a><font style="vertical-align: inherit;"></font></li>
</ul>
</div>
<div class="section" id="s-using-models">
<span id="using-models"></span><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型使用</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#using-models" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦你定义了你的模型，你需要告诉Django你准备*使用*这些模型。你需要修改设置文件中的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/settings/#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在这个设置中添加包含你   </font></font><code class="docutils literal notranslate"><span class="pre">models.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件的模块的名字。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果模型位于你项目中的``myapp.models``中（此包结构使用：djadmin：</font></font><cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manage.py startapp`命令创建）,: setting：`INSTALLED_APPS</font></font></cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应设置如下：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="s1">'myapp'</span><span class="p">,</span>
    <span class="c1">#...</span>
<span class="p">]</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当你向</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/settings/#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加新的应用的时候，请务必运行：djadmin：</font></font><cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manage.py migrate &lt;migrate&gt;</font></font></cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，此外你也可以先使用以下命令先进行迁移</font><font style="vertical-align: inherit;">。</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/django-admin/#django-admin-makemigrations"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">makemigrations</span></code></a><font style="vertical-align: inherit;"></font></p>
</div>
<div class="section" id="s-fields">
<span id="fields"></span><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#fields" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型中最重要的，并且也是唯一必须的是数据库的字段定义。字段在类中定义。定义字段名时应小心避免使用与</font></font><span class="xref std std-doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型API &lt;/ ref / models / instances&gt;冲突的名称，如``清洁`</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,, </font></font><code class="docutils literal notranslate"><span class="pre">save</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id1"><span class="problematic" id="id2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">``</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除</font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id1"><span class="problematic" id="id2"><font style="vertical-align: inherit;">``</font></span></a><font style="vertical-align: inherit;">等。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">举例：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Musician</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">instrument</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Album</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">artist</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Musician</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">release_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">num_stars</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="s-field-types">
<span id="field-types"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型字段</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#field-types" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型中每一个字段都应该是相应类的实例，Django利用这些字段类来实现下面这些功能。</font></font></p>
<ul class="simple">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段类型用以指定数据库数据类型（如：</font></font><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="docutils literal notranslate"><span class="pre">TEXT</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认的HTML表单输入框&lt;/ ref / forms / widgets&gt;（如：&lt;input type =“text”&gt; &lt;select&gt;）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于Django admin和自动生成表单的基本验证。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django的内置了多种字段类型;你可以在模型字段参考&lt;模型场类型&gt;中看到完整列表如果Django的内置类型不能满足你的需求，你可以很轻松地编写自定义的字段类型</font><font style="vertical-align: inherit;">;见：doc：</font></font><cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ howto / custom-model-fields</font></font></cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="section" id="s-field-options">
<span id="field-options"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项对话字段</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#field-options" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每一种字段都需要指定一些特定的参数（参考</font></font><span class="xref std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型字段引用&lt;model-field-types&gt;）例如:: class：`~django.db.models.CharField</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（以及它的子类）需要接收一个</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，指定用以存储数据库数据时用的</font></font><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大小。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些可选的参数是通用的，可以用于任何字段类型，详情请见：ref：</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id1"><span class="problematic" id="id2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reference &lt;common-model-field-options&gt;`，下面介绍一部分经常用到的通用参数：</font></font></p>
<dl class="docutils">
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a></dt>
<dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果设置为</font></font><code class="docutils literal notranslate"><span class="pre">True</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，当该字段为空时，Django会将数据库中该字段设置为</font></font><code class="docutils literal notranslate"><span class="pre">NULL</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;。默认为</font></font><code class="docutils literal notranslate"><span class="pre">False</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></dd>
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.blank" title="django.db.models.Field.blank"><code class="xref py py-attr docutils literal notranslate"><span class="pre">blank</span></code></a></dt>
<dd><p class="first"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果设置为</font></font><code class="docutils literal notranslate"><span class="pre">True</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该字段允许为空。默认为</font></font><code class="docutils literal notranslate"><span class="pre">False</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该注意选项对话与</font></font><code class="docutils literal notranslate"><span class="pre">False</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不同，</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项仅仅是数据库层面的设置，然而</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.blank" title="django.db.models.Field.blank"><code class="xref py py-attr docutils literal notranslate"><span class="pre">blank</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是涉及表单验证方面。如果一个字段设置为</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.blank" title="django.db.models.Field.blank"><code class="xref py py-attr docutils literal notranslate"><span class="pre">blank=True</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在进行表单验证时，接收的数据该字段值允许为空</font><font style="vertical-align: inherit;">，而为设置</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.blank" title="django.db.models.Field.blank"><code class="xref py py-attr docutils literal notranslate"><span class="pre">blank=False</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时，不允许为空。</font></font></p>
</dd>
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.choices" title="django.db.models.Field.choices"><code class="xref py py-attr docutils literal notranslate"><span class="pre">choices</span></code></a></dt>
<dd><p class="first"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该参数接收一个可迭代的列表或元组（基本单位为二元组）。如果指定了该参数，在实例化该模型时，该字段只能取选项列表中的值。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个选项列表：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">'FR'</span><span class="p">,</span> <span class="s1">'Freshman'</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">'SO'</span><span class="p">,</span> <span class="s1">'Sophomore'</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">'JR'</span><span class="p">,</span> <span class="s1">'Junior'</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">'SR'</span><span class="p">,</span> <span class="s1">'Senior'</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">'GR'</span><span class="p">,</span> <span class="s1">'Graduate'</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个二元组的第一个值会储存在数据库中，而第二个值将只会用于显示作用。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于一个模型实例，要获取该字段二元组中相对应的第二个值</font><font style="vertical-align: inherit;">，使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model.get_FOO_display" title="django.db.models.Model.get_FOO_display"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_FOO_display()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法例如：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">SHIRT_SIZES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s1">'S'</span><span class="p">,</span> <span class="s1">'Small'</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">'M'</span><span class="p">,</span> <span class="s1">'Medium'</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">'L'</span><span class="p">,</span> <span class="s1">'Large'</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
    <span class="n">shirt_size</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">SHIRT_SIZES</span><span class="p">)</span>
</pre></div>
</div>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Fred Flintstone"</span><span class="p">,</span> <span class="n">shirt_size</span><span class="o">=</span><span class="s2">"L"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">shirt_size</span>
<span class="go">'L'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">get_shirt_size_display</span><span class="p">()</span>
<span class="go">'Large'</span>
</pre></div>
</div>
</dd>
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.default" title="django.db.models.Field.default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">default</span></code></a></dt>
<dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该字段的默认值。可以是一个值或者是个可调用的对象，如果是个可调用对象，每次实例化模型时都会调用该对象。</font></font></dd>
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.help_text" title="django.db.models.Field.help_text"><code class="xref py py-attr docutils literal notranslate"><span class="pre">help_text</span></code></a></dt>
<dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用表单小部件显示的额外“帮助”文本。</font><font style="vertical-align: inherit;">即使您的字段未在表单上使用，它也对文档很有用。</font></font></dd>
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">primary_key</span></code></a></dt>
<dd><p class="first"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果设置为</font></font><code class="docutils literal notranslate"><span class="pre">True</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将该字段设置为该模型的主键。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一个模型中，如果你没有对任何一个字段设置</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">primary_key=True</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项.Django会自动添加一个</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.IntegerField" title="django.db.models.IntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段，用于设置为主键，因此除非你想重写Django默认的主键设置行为，你可以不手动设置主键。详情请见</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#automatic-primary-key-fields"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动设置主键</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主键字段是只可读的，如果你修改一个模型实例该字段的值并保存，你将等同于创建了一个新的模型实例例如：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Fruit</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="last highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span> <span class="o">=</span> <span class="n">Fruit</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Apple'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'Pear'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Fruit</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&lt;QuerySet ['Apple', 'Pear']&gt;</span>
</pre></div>
</div>
</dd>
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.unique" title="django.db.models.Field.unique"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique</span></code></a></dt>
<dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果设置为</font></font><code class="docutils literal notranslate"><span class="pre">True</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这个字段必须在整个表中保持值唯一</font><font style="vertical-align: inherit;">。</font></font></dd>
</dl>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再次声明，以上只是一些通用参数的简略描述。你可以在：ref：</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id1"><span class="problematic" id="id2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> common model field option reference &lt;common-model-field-options&gt;`中找到完整的介绍。</font></font></p>
</div>
<div class="section" id="s-automatic-primary-key-fields">
<span id="s-id1"></span><span id="automatic-primary-key-fields"></span><span id="id1"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置自动键主</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#automatic-primary-key-fields" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，Django会给每一个模型添加下面的字段：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">AutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个自增的主键。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你想指定设置为为主键的字段，在你想要设置为主键的字段上设置</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">primary_key=True</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项。如果Django看到你显式的设置了</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.primary_key</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将不会自动在表（模型）中添加</font></font><code class="docutils literal notranslate"><span class="pre">id</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个模型都需要拥有一个设置了</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">primary_key=True</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的字段（无论是显式的设置还是Django自动设置）。</font></font></p>
</div>
<div class="section" id="s-verbose-field-names">
<span id="s-id2"></span><span id="verbose-field-names"></span><span id="id2"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名备注</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#verbose-field-names" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了   </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，任何字段类型都接收一个可选的参数</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.verbose_name" title="django.db.models.Field.verbose_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  ，如果未指定该参数值，Django会自动使用该字段的属性名作为该参数值，并且把下划线转换为空格。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该例中：备注名为</font><font style="vertical-align: inherit;">::。</font></font><code class="docutils literal notranslate"><span class="pre">"person's</span> <span class="pre">first</span> <span class="pre">name"</span></code><font style="vertical-align: inherit;"></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="s2">"person's first name"</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该例中：备注名为</font><font style="vertical-align: inherit;">::。</font></font><code class="docutils literal notranslate"><span class="pre">"first</span> <span class="pre">name"</span></code><font style="vertical-align: inherit;"></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接收的第一个参数为模型的类名，后面可以添加一个</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.verbose_name" title="django.db.models.Field.verbose_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poll</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
    <span class="n">Poll</span><span class="p">,</span>
    <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="n">verbose_name</span><span class="o">=</span><span class="s2">"the related poll"</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">sites</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Site</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">"list of sites"</span><span class="p">)</span>
<span class="n">place</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span>
    <span class="n">Place</span><span class="p">,</span>
    <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="n">verbose_name</span><span class="o">=</span><span class="s2">"related place"</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般情况下不需要将</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.verbose_name" title="django.db.models.Field.verbose_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值首字母大写，必要时Djanog会自动把首字母转换为大写。</font></font></p>
</div>
<div class="section" id="s-relationships">
<span id="relationships"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系关联</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#relationships" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显然，关系型数据库的强大之处在于各表之间的关联关系.Django提供了定义三种最常见的数据库关联关系的方法：多对一，多对多，一对一。</font></font></p>
<div class="section" id="s-many-to-one-relationships">
<span id="many-to-one-relationships"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对一关系</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#many-to-one-relationships" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个多对一的关联关系，使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类。状语从句：就其他</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段类型一样，只需要在你模型中添加一个值为该类的属性</font><font style="vertical-align: inherit;">。</font></font></p>
<p><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 需要一个位置参数：与模型相关的类。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果一个</font></font><code class="docutils literal notranslate"><span class="pre">Car</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;模型有一个制造者</font></font><code class="docutils literal notranslate"><span class="pre">Manufacturer</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 就是说一个</font></font><code class="docutils literal notranslate"><span class="pre">Manufacturer</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制造许多车，但是每辆车都属于某个特定的制造者 - 那么使用下面的方法定义这个关系：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Manufacturer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Manufacturer</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你也可以创建一个</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#recursive-relationships"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">递归关系</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系（一个模型与它本身有多对一的关系）和：ref：</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id1"><span class="problematic" id="id2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与尚未定义的模型的关系&lt;lazy-relationships&gt;`;详情请见：ref：</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id3"><span class="problematic" id="id4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型字段参考&lt;ref-foreignkey&gt;`。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置建议</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;字段（上例中的</font></font><code class="docutils literal notranslate"><span class="pre">manufacturer</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）名为想要关联的模型名，但是你也可以随意设置为你想要的名称</font><font style="vertical-align: inherit;">，例如：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">company_that_makes_it</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Manufacturer</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参见</font></font></p>
<p><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段还可以接收一些其他的参数，详见</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#foreign-key-arguments"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型字段引用</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这些可选的参数可以更深入的规定光联关系的具体实现。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关访问与向后相关的对象的详细信息，请参阅
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/#backwards-related-objects"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下关系向后示例</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如要查看相关示例代码，详见：doc：</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id1"><span class="problematic" id="id2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对一关系模型示例&lt;/ topics / db / examples / many_to_one&gt;`。</font></font></p>
</div>
</div>
<div class="section" id="s-many-to-many-relationships">
<span id="many-to-many-relationships"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对多关系</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#many-to-many-relationships" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个多对多的关联关系，使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类。状语从句：就其他</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段类型一样，只需要在你模型中添加一个值为该类的属性</font><font style="vertical-align: inherit;">。</font></font></p>
<p><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 需要一个位置参数：与模型相关的类。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如：如果</font></font><code class="docutils literal notranslate"><span class="pre">Pizza</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含有多种</font><font style="vertical-align: inherit;">可能存在于多个</font><font style="vertical-align: inherit;">&nbsp;中，每个并且</font><font style="vertical-align: inherit;">&nbsp; 含有多种</font><font style="vertical-align: inherit;">-那么可以这样表示这种关系：</font></font><code class="docutils literal notranslate"><span class="pre">Topping``（配料）</span> <span class="pre">--</span> <span class="pre">也就是一种</span> <span class="pre">``Topping</span></code><font style="vertical-align: inherit;"></font><code class="docutils literal notranslate"><span class="pre">Pizza</span></code><font style="vertical-align: inherit;"></font><code class="docutils literal notranslate"><span class="pre">Pizza</span></code><font style="vertical-align: inherit;"></font><code class="docutils literal notranslate"><span class="pre">Topping</span></code><font style="vertical-align: inherit;"></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Topping</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Pizza</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="n">toppings</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Topping</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类一样，你也可以创建</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#recursive-relationships"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">递归关系</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系（一个对象与他本身有着多对多的关系）和</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#lazy-relationships"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系到模型尚未定义的</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置建议</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段（上例中的</font></font><code class="docutils literal notranslate"><span class="pre">toppings</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）名为一个复数名词，表示所要光联的模型对象的集合</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于多对多光联关系的两个模型，在可以任何一个模型中添加</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段，但只能选择一个模型设置该字段，即不能同时在两模型中添加该字段</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般来讲，应该把</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例放到需要在表单中被编辑的对象中。在之前的例子中，</font></font><code class="docutils literal notranslate"><span class="pre">toppings</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被放在</font></font><code class="docutils literal notranslate"><span class="pre">Pizza</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;当中（而不是</font></font><code class="docutils literal notranslate"><span class="pre">Topping</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中有指向</font></font><code class="docutils literal notranslate"><span class="pre">pizzas</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例）因为相对于配料被放在不同的披萨当中，披萨当中有很多种配料更加符合常理</font><font style="vertical-align: inherit;">。按照先前说的，编辑在</font></font><code class="docutils literal notranslate"><span class="pre">Pizza</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的表单时用户可以选择多种配料。</font></font></p>
<div class="admonition seealso">
<p class="first admonition-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参见</font></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如要查看完整示例代码，详见</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/examples/many_to_many/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对多关系模型示例</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<p><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段还接受一些额外的参数，这些参数在</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#manytomany-arguments"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型字段引用中</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行了解释</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些选项有助于确定关系应如何运作; </font><font style="vertical-align: inherit;">都是可选的。</font></font></p>
</div>
<div class="section" id="s-extra-fields-on-many-to-many-relationships">
<span id="s-intermediary-manytomany"></span><span id="extra-fields-on-many-to-many-relationships"></span><span id="intermediary-manytomany"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在多对多（多到多）中关系添加添加额外的属性字段</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#extra-fields-on-many-to-many-relationships" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你只是想要一个类似于记录披萨和配料之间混合和搭配的简单多对多关系</font><font style="vertical-align: inherit;">，的标准</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就足够你用了。然而，有的时候你可能会需要在两个模型的关系中记录更</font><font style="vertical-align: inherit;">多的数据。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">举例来讲，考虑一个需要跟踪音乐人属于哪个音乐组的应用程序</font><font style="vertical-align: inherit;">。在人和他们所在的组之间有一个多对多关系</font><font style="vertical-align: inherit;">，可以你使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来代表这个关系。然而，你想要记录更多的信息在这样的所属关系当中，比如你想要记录某人是何时加入一个组的</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于这些情况，则Django允许你指定用于控制多对多关系的模型</font><font style="vertical-align: inherit;">。你可以在中间模型当中添加而外的字段</font><font style="vertical-align: inherit;">。实例在化</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的时候使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><code class="xref py py-attr docutils literal notranslate"><span class="pre">through</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数指定多对多关系使用哪个中间模型。对于我们举的音乐家的例子，代码如下：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="s1">'Membership'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">Membership</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">date_joined</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">invite_reason</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在设置中间模型的时候，你需要显式地为多对多关系中涉及的模型指定外键。这种显式声明定义了这两个模型之间的关系。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在中间模型当中有一些限制条件：</font></font></p>
<ul class="simple">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的你中间模型要么有御姐</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个指向源模型（我们例子当中的</font></font><code class="docutils literal notranslate"><span class="pre">Group</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的外键，你要么必须通过</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField.through_fields" title="django.db.models.ManyToManyField.through_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ManyToManyField.through_fields</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数在多个外键当中手动选择一个外键，如果多个有外健御姐没有用</font></font><code class="docutils literal notranslate"><span class="pre">through_fields</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;参数选择一个的话，会出现验证错误。对于指向目标模型（我们例子当中的</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的外键也有同样的限制。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一个用于描述模型当中自己指向自己的多对多关系的中间模型当中</font><font style="vertical-align: inherit;">，可以有两个指向同一个模型的外健</font><font style="vertical-align: inherit;">，但这两个外健分表代表多对多关系</font><font style="vertical-align: inherit;">（不同）的两端。如果健外的个数</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超过</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个，必须你状语从句：上面一样指定</font></font><code class="docutils literal notranslate"><span class="pre">through_fields</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，要不然会出现验证错误。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在定义模型自己指向自己的多对多关系时，如果使用中间模型，你</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField.symmetrical" title="django.db.models.ManyToManyField.symmetrical"><code class="xref py py-attr docutils literal notranslate"><span class="pre">symmetrical=False</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（查看</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#manytomany-arguments"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型字段参考</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在你已经通过中间模型完成你的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;（例子中的``Membership``），可以开始创建一些多对多关系了你通过实例化中间模型来创建关系</font><font style="vertical-align: inherit;">：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ringo</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Ringo Starr"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paul</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Paul McCartney"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span> <span class="o">=</span> <span class="n">Group</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"The Beatles"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span> <span class="o">=</span> <span class="n">Membership</span><span class="p">(</span><span class="n">person</span><span class="o">=</span><span class="n">ringo</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">beatles</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">date_joined</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1962</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">invite_reason</span><span class="o">=</span><span class="s2">"Needed a new drummer."</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">&lt;QuerySet [&lt;Person: Ringo Starr&gt;]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ringo</span><span class="o">.</span><span class="n">group_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">&lt;QuerySet [&lt;Group: The Beatles&gt;]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span> <span class="o">=</span> <span class="n">Membership</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">person</span><span class="o">=</span><span class="n">paul</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">beatles</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">date_joined</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1960</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">invite_reason</span><span class="o">=</span><span class="s2">"Wanted to form a band."</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">&lt;QuerySet [&lt;Person: Ringo Starr&gt;, &lt;Person: Paul McCartney&gt;]&gt;</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您也可以使用</font></font><code class="docutils literal notranslate"><span class="pre">add()</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="docutils literal notranslate"><span class="pre">create()</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="docutils literal notranslate"><span class="pre">set()</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建关系，只要您指定</font></font><code class="docutils literal notranslate"><span class="pre">through_defaults</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何必填字段：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">john</span><span class="p">,</span> <span class="n">through_defaults</span><span class="o">=</span><span class="p">{</span><span class="s1">'date_joined'</span><span class="p">:</span> <span class="n">date</span><span class="p">(</span><span class="mi">1960</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"George Harrison"</span><span class="p">,</span> <span class="n">through_defaults</span><span class="o">=</span><span class="p">{</span><span class="s1">'date_joined'</span><span class="p">:</span> <span class="n">date</span><span class="p">(</span><span class="mi">1960</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="n">john</span><span class="p">,</span> <span class="n">paul</span><span class="p">,</span> <span class="n">ringo</span><span class="p">,</span> <span class="n">george</span><span class="p">],</span> <span class="n">through_defaults</span><span class="o">=</span><span class="p">{</span><span class="s1">'date_joined'</span><span class="p">:</span> <span class="n">date</span><span class="p">(</span><span class="mi">1960</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)})</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可能更喜欢直接创建中间模型的实例。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果中间模型定义的自定义直通表不强制对的唯一性</font><font style="vertical-align: inherit;">，允许多个值，则
 </font><font style="vertical-align: inherit;">调用将删除所有中间模型实例：</font></font><code class="docutils literal notranslate"><span class="pre">(model1,</span> <span class="pre">model2)</span></code><font style="vertical-align: inherit;"></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/relations/#django.db.models.fields.related.RelatedManager.remove" title="django.db.models.fields.related.RelatedManager.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove()</span></code></a><font style="vertical-align: inherit;"></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Membership</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">person</span><span class="o">=</span><span class="n">ringo</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">beatles</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">date_joined</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1968</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">invite_reason</span><span class="o">=</span><span class="s2">"You've been gone for a month and we miss you."</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">&lt;QuerySet [&lt;Person: Ringo Starr&gt;, &lt;Person: Paul McCartney&gt;, &lt;Person: Ringo Starr&gt;]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># This deletes both of the intermediate model instances for Ringo Starr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">ringo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">&lt;QuerySet [&lt;Person: Paul McCartney&gt;]&gt;</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/relations/#django.db.models.fields.related.RelatedManager.clear" title="django.db.models.fields.related.RelatedManager.clear"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
方法可用于删除实例的所有多对多关系：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Beatles have broken up</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beatles</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note that this deletes the intermediate model instances</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Membership</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">&lt;QuerySet []&gt;</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建立多对多关系后，您可以发出查询。</font><font style="vertical-align: inherit;">与正常的多对多关系一样，您可以使用多对多相关模型的属性进行查询：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find all the groups with a member whose name starts with 'Paul'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Group</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">members__name__startswith</span><span class="o">=</span><span class="s1">'Paul'</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">QuerySet</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Group</span><span class="p">:</span> <span class="n">The</span> <span class="n">Beatles</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当你使用中间模型的时候，你也可以查询他的属性：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find all the members of the Beatles that joined after 1 Jan 1961</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Person</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">group__name</span><span class="o">=</span><span class="s1">'The Beatles'</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">membership__date_joined__gt</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1961</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="o">&lt;</span><span class="n">QuerySet</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">:</span> <span class="n">Ringo</span> <span class="n">Starr</span><span class="p">]</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果想你访问一个关系的信息时你可以直接查询</font></font><code class="docutils literal notranslate"><span class="pre">Membership</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;模型：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ringos_membership</span> <span class="o">=</span> <span class="n">Membership</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="n">beatles</span><span class="p">,</span> <span class="n">person</span><span class="o">=</span><span class="n">ringo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ringos_membership</span><span class="o">.</span><span class="n">date_joined</span>
<span class="go">datetime.date(1962, 8, 16)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ringos_membership</span><span class="o">.</span><span class="n">invite_reason</span>
<span class="go">'Needed a new drummer.'</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一种访问同样信息的方法是通过</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象来查询ref：</font></font><cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对多反向关系&lt;m2m-reverse-relationships&gt;</font></font></cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ringos_membership</span> <span class="o">=</span> <span class="n">ringo</span><span class="o">.</span><span class="n">membership_set</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="n">beatles</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ringos_membership</span><span class="o">.</span><span class="n">date_joined</span>
<span class="go">datetime.date(1962, 8, 16)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ringos_membership</span><span class="o">.</span><span class="n">invite_reason</span>
<span class="go">'Needed a new drummer.'</span>
</pre></div>
</div>
</div>
<div class="section" id="s-one-to-one-relationships">
<span id="one-to-one-relationships"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一对一的关系</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#one-to-one-relationships" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来定义一对一关系就像使用其他类型的。</font></font><code class="docutils literal notranslate"><span class="pre">Field</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;一样：在模型属性中包含它。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当一个对象以某种方式“扩展”另一个对象时，这对该对象的主键非常有用。</font></font></p>
<p><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 需要一个位置参数：与模型相关的类。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，当你要建立一个有关“位置”信息的数据库时，你可能会包含通常的地址，电话等字段。接着，如果你想接着建立一个关于关于餐厅的数据库</font><font style="vertical-align: inherit;">，除了将位置数据库当中的字段复制到</font></font><code class="docutils literal notranslate"><span class="pre">Restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型，你也可以将一个指向</font></font><code class="docutils literal notranslate"><span class="pre">Place</span></code> <a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">放到</font></font><code class="docutils literal notranslate"><span class="pre">Restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当中（因为餐厅“是一个”地点）;事实上，在处理这样的情况时最好使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#model-inheritance"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">继承</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它隐含的包括了一个一对一关系。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和   </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一样，可以创建</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#recursive-relationships"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">递归关系</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以创建</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#lazy-relationships"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引用尚未定义的模型</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<div class="admonition seealso">
<p class="first admonition-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参见</font></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">点击文档</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/examples/one_to_one/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一对一关系模型示例</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来查看完整的例子。</font></font></p>
</div>
<p><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还字段接受一个可选的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField.parent_link" title="django.db.models.OneToOneField.parent_link"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent_link</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;参数。</font></font></p>
<p><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类通常自动的成为模型的主键</font><font style="vertical-align: inherit;">，这条规则现在不再使用了（你然而可以手动指定</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">primary_key</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数）。因此，可以现在在单个模型当中指定多个</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段。</font></font></p>
</div>
</div>
<div class="section" id="s-models-across-files">
<span id="models-across-files"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件跨模型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#models-across-files" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关联另一个应用中的模型是当然可以的为了实现这一点，在定义模型的文件开头导入需要被关联的模型接着，接着就可以在其他有需要的模型类当中关联它了比如。：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">geography.models</span> <span class="k">import</span> <span class="n">ZipCode</span>

<span class="k">class</span> <span class="nc">Restaurant</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="n">zip_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">ZipCode</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-field-name-restrictions">
<span id="field-name-restrictions"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名字段限制</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#field-name-restrictions" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django对模型字段名称进行了一些限制：</font></font></p>
<ol class="arabic">
<li><p class="first"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个字段的名称不能是Python的保留字，因为这回导致的Python语法错误比如：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">pass</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span> <span class="c1"># 'pass' is a reserved word!</span>
</pre></div>
</div>
</li>
<li><p class="first"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个字段名称不能包含连续的多个下划线，原因在于Django的查询语法的工作方式比如：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">foo__bar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span> <span class="c1"># 'foo__bar' has two underscores!</span>
</pre></div>
</div>
</li>
<li><p class="first"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出于类似的原因，字段名称不能以下划线结尾。</font></font></p>
</li>
</ol>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，这些限制是可以被解决的，因为字段名没要求和数据库列名一样</font><font style="vertical-align: inherit;">。查看</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_column</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;选项对话。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL保留字，例如</font></font><code class="docutils literal notranslate"><span class="pre">join</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="docutils literal notranslate"><span class="pre">where</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="docutils literal notranslate"><span class="pre">select</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的英文</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以被用在模型字段名当中的，因为Django的在对底层的SQL查询当中清洗了所有的数据库表名和字段名</font><font style="vertical-align: inherit;">，通过使用特定数据库引擎的引用语法。</font></font></p>
</div>
<div class="section" id="s-custom-field-types">
<span id="custom-field-types"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义自字段的类型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#custom-field-types" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果已经存在的模型字段不能满足你的需求，或者你希望支持一些不太常见的数据库列类型，你可以创建自己的字段类。在：doc：</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id1"><span class="problematic" id="id2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / howto / custom-model-fields中提供了创建自己的字段的各方面内容。</font></font></p>
</div>
</div>
<div class="section" id="s-meta-options">
<span id="s-id3"></span><span id="meta-options"></span><span id="id3"></span><h2><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项对话</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部使用</font></font><code class="docutils literal notranslate"><span class="pre">Meta类</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来给模型赋予元型态数据，就像：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Ox</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">horn_length</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"horn_length"</span><span class="p">]</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">"oxen"</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型的元数据是指“所有不是字段的东西”，比如排序选项（attr：</font></font><cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~Options.ordering</font></font></cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），数据库表名（</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/#django.db.models.Options.db_table" title="django.db.models.Options.db_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_table</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），或是人可读的单复数名（</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/#django.db.models.Options.verbose_name" title="django.db.models.Options.verbose_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/#django.db.models.Options.verbose_name_plural" title="django.db.models.Options.verbose_name_plural"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name_plural</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。都不是必须的，在并且模型当中添加</font></font><code class="docutils literal notranslate"><span class="pre">Meta类</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也。完全的英文可选的。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型选项参考</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中列出了</font></font><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可使用的全部选项。</font></font></p>
</div>
<div class="section" id="s-model-attributes">
<span id="s-id4"></span><span id="model-attributes"></span><span id="id4"></span><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性模型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#model-attributes" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">objects</span></code></dt>
<dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型当中最重要的属性是</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/managers/#django.db.models.Manager" title="django.db.models.Manager"><code class="xref py py-class docutils literal notranslate"><span class="pre">Manager</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。它是Django模型和数据库查询操作之间的接口，并且它被用作从数据库当中</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/#retrieving-objects"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检索实例</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果没有指定自定义的</font></font><code class="docutils literal notranslate"><span class="pre">Manager</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认名称是</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/class/#django.db.models.Model.objects" title="django.db.models.Model.objects"><code class="xref py py-attr docutils literal notranslate"><span class="pre">objects</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.Manager只能通过模型​​类来访问，不能通过模型实例来访问。</font></font></dd>
</dl>
</div>
<div class="section" id="s-model-methods">
<span id="s-id5"></span><span id="model-methods"></span><span id="id5"></span><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法模型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#model-methods" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在模型上定义自定义方法，以向对象添加自定义“行级”功能。</font><font style="vertical-align: inherit;">虽然</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/managers/#django.db.models.Manager" title="django.db.models.Manager"><code class="xref py py-class docutils literal notranslate"><span class="pre">Manager</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法有尽而意“表范围”的东西，模型方法应该作用于特定的模型实例。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一种将业务逻辑保存在一个地方的有价值的技术 - 模型。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，此模型有一些自定义方法：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">birth_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">baby_boomer_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">"Returns the person's baby-boomer status."</span>
        <span class="kn">import</span> <span class="nn">datetime</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">birth_date</span> <span class="o">&lt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1945</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">"Pre-boomer"</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">birth_date</span> <span class="o">&lt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1965</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">"Baby boomer"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">"Post-boomer"</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">"Returns the person's full name."</span>
        <span class="k">return</span> <span class="s1">'</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例中的最后一个方法是</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/glossary/#term-property"><span class="xref std std-term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型实例参考</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有的完整列表，</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#model-instance-methods"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动给每个模型的方法</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以覆盖其中的大多数 - 请参阅下面的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#overriding-predefined-model-methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">覆盖预定义模型方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 但有几个您几乎总是想要定义：</font></font></p>
<dl class="docutils">
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model.__str__" title="django.db.models.Model .__ str__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__str__()</span></code></a></dt>
<dd><p class="first"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python“魔术方法”，返回任何对象的字符串表示形式。</font><font style="vertical-align: inherit;">这是Python和Django在模型实例需要被强制并显示为纯字符串时将使用的内容。</font><font style="vertical-align: inherit;">最值得注意的是，当您在交互式控制台或管理员中显示对象时会发生这种情况。</font></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你总是想要定义这个方法; </font><font style="vertical-align: inherit;">默认情况下根本没有用。</font></font></p>
</dd>
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model.get_absolute_url" title="django.db.models.Model.get_absolute_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_absolute_url()</span></code></a></dt>
<dd><p class="first"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这告诉Django如何计算对象的URL。</font><font style="vertical-align: inherit;">Django在其管理界面中使用它，并且只要它需要找出对象的URL。</font></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有唯一标识它的URL的任何对象都应定义此方法。</font></font></p>
</dd>
</dl>
<div class="section" id="s-overriding-predefined-model-methods">
<span id="s-overriding-model-methods"></span><span id="overriding-predefined-model-methods"></span><span id="overriding-model-methods"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">覆盖预定义的模型方法</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#overriding-predefined-model-methods" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还有另一组</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#model-instance-methods"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型方法</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它们封装了一些您想要自定义的数据库行为。</font><font style="vertical-align: inherit;">特别是你经常想改变方式</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model.delete" title="django.db.models.Model.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作方式。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以自由地覆盖这些方法（以及任何其他模型方法）来改变行为。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于覆盖内置方法的经典用例是，如果您希望在保存对象时发生某些事情。</font><font style="vertical-align: inherit;">例如（参见
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它接受的参数的文档）：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">do_something</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># Call the "real" save() method.</span>
        <span class="n">do_something_else</span><span class="p">()</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以阻止保存：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"Yoko Ono's blog"</span><span class="p">:</span>
            <span class="k">return</span> <span class="c1"># Yoko shall never have her own blog!</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># Call the "real" save() method.</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要的是要记住调用超类方法 - 那就是</font><font style="vertical-align: inherit;">业务 - 以确保对象仍然保存到数据库中。</font><font style="vertical-align: inherit;">如果您忘记调用超类方法，则不会发生默认行为，也不会触及数据库。</font></font><code class="docutils literal notranslate"><span class="pre">super().save(*args,</span> <span class="pre">**kwargs)</span></code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过可以传递给模型方法的参数也很重要 - 这就是它的</font><font style="vertical-align: inherit;">作用。</font><font style="vertical-align: inherit;">Django将不时扩展内置模型方法的功能，增加新的参数。</font><font style="vertical-align: inherit;">如果</font><font style="vertical-align: inherit;">在方法定义中使用，则可以保证代码在添加时会自动支持这些参数。</font></font><code class="docutils literal notranslate"><span class="pre">*args,</span> <span class="pre">**kwargs</span></code><font style="vertical-align: inherit;"></font><code class="docutils literal notranslate"><span class="pre">*args,</span>
<span class="pre">**kwargs</span></code><font style="vertical-align: inherit;"></font></p>
<div class="admonition-overridden-model-methods-are-not-called-on-bulk-operations admonition">
<p class="first admonition-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在批量操作上不会调用重写的模型方法</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，</font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/#topics-db-queries-delete"><span class="std std-ref"><font style="vertical-align: inherit;">使用QuerySet</font></span></a><font style="vertical-align: inherit;">或作为a的结果</font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/#topics-db-queries-delete"><span class="std std-ref"><font style="vertical-align: inherit;">批量删除对象时，</font></span></a></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model.delete" title="django.db.models.Model.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不一定要调用对象</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为确保执行自定义删除逻辑，您可以使用
 </font><font style="vertical-align: inherit;">和/或
 </font><font style="vertical-align: inherit;">发出信号。</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/#topics-db-queries-delete"><span class="std std-ref"><font style="vertical-align: inherit;"></font></span></a><font style="vertical-align: inherit;"></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cascading</span>
<span class="pre">delete</span></code></a><font style="vertical-align: inherit;"></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/signals/#django.db.models.signals.pre_delete" title="django.db.models.signals.pre_delete"><code class="xref py py-data docutils literal notranslate"><span class="pre">pre_delete</span></code></a><font style="vertical-align: inherit;"></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/signals/#django.db.models.signals.post_delete" title="django.db.models.signals.post_delete"><code class="xref py py-data docutils literal notranslate"><span class="pre">post_delete</span></code></a><font style="vertical-align: inherit;"></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不幸的是，没有一个解决办法时
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create" title="django.db.models.query.QuerySet.bulk_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creating</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/querysets/#django.db.models.query.QuerySet.update" title="django.db.models.query.QuerySet.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">updating</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物体散装，因为没有的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/signals/#django.db.models.signals.pre_save" title="django.db.models.signals.pre_save"><code class="xref py py-data docutils literal notranslate"><span class="pre">pre_save</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/signals/#django.db.models.signals.post_save" title="django.db.models.signals.post_save"><code class="xref py py-data docutils literal notranslate"><span class="pre">post_save</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被调用。</font></font></p>
</div>
</div>
<div class="section" id="s-executing-custom-sql">
<span id="executing-custom-sql"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行自定义</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#executing-custom-sql" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一种常见模式是在模型方法和模块级方法中编写自定义SQL语句。</font><font style="vertical-align: inherit;">有关使用原始SQL的更多详细信息，请参阅有关</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/sql/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用原始SQL</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的文档</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="section" id="s-model-inheritance">
<span id="s-id6"></span><span id="model-inheritance"></span><span id="id6"></span><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">继承模型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#model-inheritance" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型继承在Django中与普通类继承在Python中的工作方式几乎完全相同，但也仍有遵循本页开头的内容。</font><font style="vertical-align: inherit;">这意味着其基类应该继承自</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/instances/#django.db.models.Model" title="django.db.models.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.Model</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您必须做出的唯一决定是，您是希望父模型本身是模型（使用自己的数据库表），还是父母只是通过子模型只能看到的公共信息的持有者。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django中有三种可能的继承方式。</font></font></p>
<ol class="arabic simple">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，您只想使用父类来保存您不希望为每个子模型键入的信息。</font><font style="vertical-align: inherit;">这个类不会被孤立使用，所以</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#abstract-base-classes"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抽象基类</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就是你所追求的。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你是现有模型的子类（可能完全是来自另一个应用程序的东西），并希望每个模型都有自己的数据库表，那么
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#multi-table-inheritance"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多表继承</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就是最佳选择。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，如果您只想修改模型的Python级行为，而不以任何方式更改模型字段，则可以使用
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#proxy-models"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理模型</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol>
<div class="section" id="s-abstract-base-classes">
<span id="s-id7"></span><span id="abstract-base-classes"></span><span id="id7"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抽象基类</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#abstract-base-classes" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您想要将一些公共信息放入许多其他模型时，抽象基类非常有用。</font><font style="vertical-align: inherit;">你写你的基类，并把</font></font><code class="docutils literal notranslate"><span class="pre">abstract=True</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
类。</font><font style="vertical-align: inherit;">然后，此模型不会用于创建任何数据库表。</font><font style="vertical-align: inherit;">相反，当它用作其他模型的基类时，其字段将添加到子类的字段中。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个例子：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">CommonInfo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">CommonInfo</span><span class="p">):</span>
    <span class="n">home_group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code class="docutils literal notranslate"><span class="pre">Student</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型将有三个领域：</font></font><code class="docutils literal notranslate"><span class="pre">name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="docutils literal notranslate"><span class="pre">age</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
 </font></font><code class="docutils literal notranslate"><span class="pre">home_group</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该</font></font><code class="docutils literal notranslate"><span class="pre">CommonInfo</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型不能用作普通的Django模型，因为它是一个抽象基类。</font><font style="vertical-align: inherit;">它不生成数据库表或具有管理器，并且无法直接实例化或保存。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从抽象基类继承的字段可以使用其他字段或值覆盖，也可以使用删除</font></font><code class="docutils literal notranslate"><span class="pre">None</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于许多用途，这种类型的模型继承将完全符合您的要求。</font><font style="vertical-align: inherit;">它提供了一种在Python级别分解公共信息的方法，同时仍然只在数据库级别为每个子模型创建一个数据库表。</font></font></p>
<div class="section" id="s-meta-inheritance">
<span id="meta-inheritance"></span><h4><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">继承</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-inheritance" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当创建抽象基类时，Django使</font><font style="vertical-align: inherit;">
您在基类中声明的</font><font style="vertical-align: inherit;">任何</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部类可用作属性。</font><font style="vertical-align: inherit;">如果子类没有声明它自己的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
类，它将继承父类的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果孩子想要扩展父</font><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类，它可以将其子类化。</font><font style="vertical-align: inherit;">例如：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">CommonInfo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'name'</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">CommonInfo</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">(</span><span class="n">CommonInfo</span><span class="o">.</span><span class="n">Meta</span><span class="p">):</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">'student_info'</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django确实</font><font style="vertical-align: inherit;">对抽象基类</font><font style="vertical-align: inherit;">的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">进行了一次调整</font><font style="vertical-align: inherit;">：在安装</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">之前</font><font style="vertical-align: inherit;">，它设置了</font></font><code class="docutils literal notranslate"><span class="pre">abstract=False</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着抽象基类的子项本身不会自动成为抽象类。</font><font style="vertical-align: inherit;">当然，您可以创建一个继承自另一个抽象基类的抽象基类。</font><font style="vertical-align: inherit;">您只需要记住</font></font><code class="docutils literal notranslate"><span class="pre">abstract=True</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每次都</font><font style="vertical-align: inherit;">明确设置</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">抽象基类</font><font style="vertical-align: inherit;">的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类中</font><font style="vertical-align: inherit;">包含一些属性是没有意义的</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，包含</font></font><code class="docutils literal notranslate"><span class="pre">db_table</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着所有子类（未指定自己的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）将使用相同的数据库表，这几乎肯定不是您想要的。</font></font></p>
</div>
<div class="section" id="s-be-careful-with-related-name-and-related-query-name">
<span id="s-abstract-related-name"></span><span id="be-careful-with-related-name-and-related-query-name"></span><span id="abstract-related-name"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小心</font></font><code class="docutils literal notranslate"><span class="pre">related_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="docutils literal notranslate"><span class="pre">related_query_name</span></code><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#be-careful-with-related-name-and-related-query-name" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您正在使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_query_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
 </font></font><code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则必须始终</font><font style="vertical-align: inherit;">为该字段</font><font style="vertical-align: inherit;">指定</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反向名称和查询名称。</font><font style="vertical-align: inherit;">这通常会导致抽象基类出现问题，因为此类中的字段包含在每个子类中，每次都具有完全相同的属性值（包括
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_query_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">若要解决此问题，当您使用
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_query_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在抽象基类（仅）时，值的一部分应包含</font></font><code class="docutils literal notranslate"><span class="pre">'%(app_label)s'</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
 </font></font><code class="docutils literal notranslate"><span class="pre">'%(class)s'</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">'%(class)s'</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 被替换为使用该字段的子类的小写名称。</font></font></li>
<li><code class="docutils literal notranslate"><span class="pre">'%(app_label)s'</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由子类包含在的app的小写名称替换。</font><font style="vertical-align: inherit;">每个安装的应用程序名称必须是唯一的，并且每个应用程序中的模型类名称也必须是唯一的，因此生成的名称最终会有所不同。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，给定一个应用程序</font></font><code class="docutils literal notranslate"><span class="pre">common/models.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">m2m</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span>
        <span class="n">OtherModel</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">"</span><span class="si">%(app_label)s</span><span class="s2">_</span><span class="si">%(class)s</span><span class="s2">_related"</span><span class="p">,</span>
        <span class="n">related_query_name</span><span class="o">=</span><span class="s2">"</span><span class="si">%(app_label)s</span><span class="s2">_</span><span class="si">%(class)s</span><span class="s2">s"</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">ChildA</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">ChildB</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与另一个应用程序</font></font><code class="docutils literal notranslate"><span class="pre">rare/models.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">common.models</span> <span class="k">import</span> <span class="n">Base</span>

<span class="k">class</span> <span class="nc">ChildB</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code class="docutils literal notranslate"><span class="pre">common.ChildA.m2m</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">的反向名称</font><font style="vertical-align: inherit;">将是
 </font></font><code class="docutils literal notranslate"><span class="pre">common_childa_related</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，反向查询名称将是</font></font><code class="docutils literal notranslate"><span class="pre">common_childas</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该</font></font><code class="docutils literal notranslate"><span class="pre">common.ChildB.m2m</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">的反向名称</font><font style="vertical-align: inherit;">将是
 </font></font><code class="docutils literal notranslate"><span class="pre">common_childb_related</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，反向查询名称将是
 </font></font><code class="docutils literal notranslate"><span class="pre">common_childbs</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最后，</font></font><code class="docutils literal notranslate"><span class="pre">rare.ChildB.m2m</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font></font><code class="docutils literal notranslate"><span class="pre">rare_childb_related</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的反向名称将是反向查询名称
 </font></font><code class="docutils literal notranslate"><span class="pre">rare_childbs</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">由您来决定如何使用</font></font><code class="docutils literal notranslate"><span class="pre">'%(class)s'</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
 </font></font><code class="docutils literal notranslate"><span class="pre">'%(app_label)s'</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分来构造相关名称或相关查询名称，但如果您忘记使用它，Django将在您执行系统检查（或运行</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/django-admin/#django-admin-migrate"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">migrate</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">时引发错误</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为抽象基类中的字段</font><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">属性，则默认的反向名称将是后跟子类的名称</font></font><code class="docutils literal notranslate"><span class="pre">'_set'</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，就像通常在子类上直接声明字段一样。</font><font style="vertical-align: inherit;">例如，在上面的代码中，如果</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
省略了</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">属性，则该</font></font><code class="docutils literal notranslate"><span class="pre">m2m</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">的反向名称</font><font style="vertical-align: inherit;">将
 </font></font><code class="docutils literal notranslate"><span class="pre">childa_set</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">
字段中</font></font><code class="docutils literal notranslate"><span class="pre">ChildA</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="docutils literal notranslate"><span class="pre">childb_set</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于该</font></font><code class="docutils literal notranslate"><span class="pre">ChildB</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段。</font></font></p>
</div>
</div>
<div class="section" id="s-multi-table-inheritance">
<span id="s-id8"></span><span id="multi-table-inheritance"></span><span id="id8"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多表继承</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#multi-table-inheritance" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django支持的第二种模型继承是当层次结构中的每个模型都是模型本身时。</font><font style="vertical-align: inherit;">每个模型对应于自己的数据库表，可以单独查询和创建。</font><font style="vertical-align: inherit;">继承关系引入子模型与其每个父模型之间的链接（通过自动创建</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">例如：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Place</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Restaurant</span><span class="p">(</span><span class="n">Place</span><span class="p">):</span>
    <span class="n">serves_hot_dogs</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">serves_pizza</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管数据将驻留在不同的数据库表</font></font><code class="docutils literal notranslate"><span class="pre">Place</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font></font><code class="docutils literal notranslate"><span class="pre">Restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但</font><font style="vertical-align: inherit;">所有字段都</font><font style="vertical-align: inherit;">将可用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所以这些都是可能的：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Place</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Bob's Cafe"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Restaurant</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Bob's Cafe"</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您还有a </font></font><code class="docutils literal notranslate"><span class="pre">Place</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则</font></font><code class="docutils literal notranslate"><span class="pre">Restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以</font><font style="vertical-align: inherit;">使用模型名称的小写版本</font><font style="vertical-align: inherit;">从
 </font></font><code class="docutils literal notranslate"><span class="pre">Place</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象到</font></font><code class="docutils literal notranslate"><span class="pre">Restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Place</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="go"># If p is a Restaurant object, this will give the child class:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">restaurant</span>
<span class="go">&lt;Restaurant: ...&gt;</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，如果</font></font><code class="docutils literal notranslate"><span class="pre">p</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的示例中</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a </font></font><code class="docutils literal notranslate"><span class="pre">Restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（它已直接创建为</font></font><code class="docutils literal notranslate"><span class="pre">Place</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象或是其他类的父级），则引用</font></font><code class="docutils literal notranslate"><span class="pre">p.restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会引发</font></font><code class="docutils literal notranslate"><span class="pre">Restaurant.DoesNotExist</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
异常。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动创建</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的
 </font></font><code class="docutils literal notranslate"><span class="pre">Restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它链接到</font></font><code class="docutils literal notranslate"><span class="pre">Place</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">看起来像这样：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">place_ptr</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span>
    <span class="n">Place</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="n">parent_link</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以通过声明自己重写场
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField.parent_link" title="django.db.models.OneToOneField.parent_link"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent_link=True</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上</font></font><code class="docutils literal notranslate"><span class="pre">Restaurant</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<div class="section" id="s-meta-and-multi-table-inheritance">
<span id="s-id9"></span><span id="meta-and-multi-table-inheritance"></span><span id="id9"></span><h4><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和多表继承</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-and-multi-table-inheritance" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在多表继承情况下，子类从其父</font><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">继承是没有意义的</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所有的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项都已经应用于父类，并且再次应用它们通常只会导致矛盾的行为（这与基类本身不存在的抽象基类情况形成对比）。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，子模型无法访问其父</font><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类。</font><font style="vertical-align: inherit;">但是，有一些有限的情况，子进程从父进程继承行为：如果子进程没有指定
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/#django.db.models.Options.ordering" title="django.db.models.Options.ordering"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ordering</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性或
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/#django.db.models.Options.get_latest_by" title="django.db.models.Options.get_latest_by"><code class="xref py py-attr docutils literal notranslate"><span class="pre">get_latest_by</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性，它将从父进程继承它们。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果父级有一个排序，并且您不希望子级具有任何自然顺序，则可以明确禁用它：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ChildModel</span><span class="p">(</span><span class="n">ParentModel</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># Remove parent's ordering effect</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
<div class="section" id="s-inheritance-and-reverse-relations">
<span id="inheritance-and-reverse-relations"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">继承和反向关系</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#inheritance-and-reverse-relations" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于多表继承使用隐式
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接子项和父项，因此可以从父项向下移动到子项，如上例所示。</font><font style="vertical-align: inherit;">但是，这会占用名称</font><font style="vertical-align: inherit;">和
 </font><font style="vertical-align: inherit;">关系</font><font style="vertical-align: inherit;">的默认</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果要将这些类型的关系放在父模型的子类上，则
 </font><strong><font style="vertical-align: inherit;">必须</font></strong><font style="vertical-align: inherit;"> 
在每个此类字段上</font><font style="vertical-align: inherit;">指定该</font><font style="vertical-align: inherit;">属性。</font><font style="vertical-align: inherit;">如果您忘记了，Django将引发验证错误。</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，</font></font><code class="docutils literal notranslate"><span class="pre">Place</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再次</font><font style="vertical-align: inherit;">使用上面的</font><font style="vertical-align: inherit;">类，让我们创建另一个子类，其中包含</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Supplier</span><span class="p">(</span><span class="n">Place</span><span class="p">):</span>
    <span class="n">customers</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Place</span><span class="p">)</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这会导致错误：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Reverse</span> <span class="n">query</span> <span class="n">name</span> <span class="k">for</span> <span class="s1">'Supplier.customers'</span> <span class="n">clashes</span> <span class="k">with</span> <span class="n">reverse</span> <span class="n">query</span>
<span class="n">name</span> <span class="k">for</span> <span class="s1">'Supplier.place_ptr'</span><span class="o">.</span>

<span class="n">HINT</span><span class="p">:</span> <span class="n">Add</span> <span class="ow">or</span> <span class="n">change</span> <span class="n">a</span> <span class="n">related_name</span> <span class="n">argument</span> <span class="n">to</span> <span class="n">the</span> <span class="n">definition</span> <span class="k">for</span>
<span class="s1">'Supplier.customers'</span> <span class="ow">or</span> <span class="s1">'Supplier.place_ptr'</span><span class="o">.</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下</font><font style="vertical-align: inherit;">添加</font></font><code class="docutils literal notranslate"><span class="pre">related_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到该</font></font><code class="docutils literal notranslate"><span class="pre">customers</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段将解决错误：</font><font style="vertical-align: inherit;">。</font></font><code class="docutils literal notranslate"><span class="pre">models.ManyToManyField(Place,</span> <span class="pre">related_name='provider')</span></code><font style="vertical-align: inherit;"></font></p>
</div>
<div class="section" id="s-specifying-the-parent-link-field">
<span id="specifying-the-parent-link-field"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定父链接字段</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#specifying-the-parent-link-field" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如上所述，Django将自动创建一个
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将您的子类链接回任何非抽象父模型。</font><font style="vertical-align: inherit;">如果要控制链接回父级的属性的名称，可以创建自己的属性</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并设置
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField.parent_link" title="django.db.models.OneToOneField.parent_link"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent_link=True</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为指示您的字段是返回父类的链接。</font></font></p>
</div>
</div>
<div class="section" id="s-proxy-models">
<span id="s-id10"></span><span id="proxy-models"></span><span id="id10"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理模型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#proxy-models" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#multi-table-inheritance"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多表继承时</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，会为模型的每个子类创建一个新的数据库表。</font><font style="vertical-align: inherit;">这通常是所需的行为，因为子类需要一个位置来存储基类上不存在的任何其他数据字段。</font><font style="vertical-align: inherit;">但是，有时您只想更改模型的Python行为 - 可能更改默认管理器或添加新方法。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这就是代理模型继承的用途：</font><font style="vertical-align: inherit;">为原始模型</font><font style="vertical-align: inherit;">创建</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以创建，删除和更新代理模型的实例，并且将保存所有数据，就像使用原始（非代理）模型一样。</font><font style="vertical-align: inherit;">不同之处在于您可以更改代理中的默认模型排序或默认管理器等内容，而无需更改原始内容。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理模型声明为普通模型。</font><font style="vertical-align: inherit;">你通过设置</font><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/#django.db.models.Options.proxy" title="django.db.models.Options.proxy"><code class="xref py py-attr docutils literal notranslate"><span class="pre">proxy</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">告诉Django它是一个代理模型</font><font style="vertical-align: inherit;">。</font></font><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"></font><code class="docutils literal notranslate"><span class="pre">True</span></code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，假设您要向</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型</font><font style="vertical-align: inherit;">添加方法</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">你可以这样做：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyPerson</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code class="docutils literal notranslate"><span class="pre">MyPerson</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">班在同一个数据库表作为它的父工作
 </font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类。</font><font style="vertical-align: inherit;">特别是，任何新的实例</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以通过</font></font><code class="docutils literal notranslate"><span class="pre">MyPerson</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，反之亦然：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">first_name</span><span class="o">=</span><span class="s2">"foobar"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MyPerson</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">first_name</span><span class="o">=</span><span class="s2">"foobar"</span><span class="p">)</span>
<span class="go">&lt;MyPerson: foobar&gt;</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你仍然可以使用一个代理模型来定义模型的默认排序方法你也许不会想一直对“Persion”进行排序，但是通常情况下用代理模型根据“姓氏”属性进行排序这很简单。：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">OrderedPerson</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"last_name"</span><span class="p">]</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，正常</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询将是无序的，</font></font><code class="docutils literal notranslate"><span class="pre">OrderedPerson</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询将按顺序排序</font></font><code class="docutils literal notranslate"><span class="pre">last_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理模型继承“Meta”属性：ref：</font></font><cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和普通模型使用同样的方法&lt;meta-and-multi-table-inheritance&gt;</font></font></cite><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<div class="section" id="s-querysets-still-return-the-model-that-was-requested">
<span id="querysets-still-return-the-model-that-was-requested"></span><h4><code class="docutils literal notranslate"><span class="pre">QuerySet</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仍然返回被请求的模型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#querysets-still-return-the-model-that-was-requested" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"></font><code class="docutils literal notranslate"><span class="pre">MyPerson</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每当你查询对象时</font><font style="vertical-align: inherit;">，就没有办法让Django返回一个</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象。</font><font style="vertical-align: inherit;">一种用于查询集</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象将返回这些类型的对象。</font><font style="vertical-align: inherit;">代理对象的重点是依赖于原始代码的代码</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将使用这些代码，并且您自己的代码可以使用您包含的扩展（无论如何其他代码都没有依赖）。</font><font style="vertical-align: inherit;">它不是</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用你自己创造的东西</font><font style="vertical-align: inherit;">替换</font><font style="vertical-align: inherit;">任何地方（或任何其他）模型的方法。</font></font></p>
</div>
<div class="section" id="s-base-class-restrictions">
<span id="base-class-restrictions"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基类限制</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#base-class-restrictions" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个代理模型必须仅能继承一个非抽象模型类。你不能继承多个非抽象模型类，因为代理模型无法提供不同数据表的任何行间连接。一个代理模型可以继承任意数量的抽象模型类，假如他们*没有*定义任何的模型字段。一个代理模型也可以继承任意数量的代理模型，只需他们共享同一个非抽象父类。</font></font></p>
</div>
<div class="section" id="s-proxy-model-managers">
<span id="proxy-model-managers"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型代理管理器</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#proxy-model-managers" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果未在代理模型上指定任何模型管理器，则它将从其模型父项继承管理器。</font><font style="vertical-align: inherit;">如果在代理模型上定义管理器，它将成为默认管理器，尽管在父类上定义的任何管理器仍然可用。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">继续上面的示例，您可以更改查询</font></font><code class="docutils literal notranslate"><span class="pre">Person</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型</font><font style="vertical-align: inherit;">时使用的默认管理器，</font><font style="vertical-align: inherit;">如下所示：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">NewManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyPerson</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">NewManager</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果要在不替换现有默认值的情况下向代理添加新管理器，可以使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/managers/#custom-managers-and-inheritance"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自定义管理器</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档中</font><font style="vertical-align: inherit;">描述的技术</font><font style="vertical-align: inherit;">：创建包含新管理器的基类，并在主基类之后继承：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an abstract class for the new manager.</span>
<span class="k">class</span> <span class="nc">ExtraManagers</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">secondary</span> <span class="o">=</span> <span class="n">NewManager</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">MyPerson</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">ExtraManagers</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常情况下，你可能不需要这么做。然而，你需要的时候，这也是可以的。</font></font></p>
</div>
<div class="section" id="s-differences-between-proxy-inheritance-and-unmanaged-models">
<span id="s-proxy-vs-unmanaged-models"></span><span id="differences-between-proxy-inheritance-and-unmanaged-models"></span><span id="proxy-vs-unmanaged-models"></span><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理继承和非托管模型之间的差异</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#differences-between-proxy-inheritance-and-unmanaged-models" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理模型继承可能看起来与使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/#django.db.models.Options.managed" title="django.db.models.Options.managed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">managed</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型</font></font><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">创建非托管模型非常相似</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过仔细设置，</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/options/#django.db.models.Options.db_table" title="django.db.models.Options.db_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.db_table</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以创建一个非托管模型，该模型可以隐藏现有模型并为其添加Python方法。</font><font style="vertical-align: inherit;">但是，如果您进行任何更改，则需要保持两个副本同步，这将是非常重复和脆弱的。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一方面，代理模型的行为与它们所代表的模型完全相同。</font><font style="vertical-align: inherit;">它们始终与父模型同步，因为它们直接继承其字段和管理器。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般规则是：</font></font></p>
<ol class="arabic simple">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果要镜像现有模型或数据库表，并且不想要所有原始数据库表列，请使用</font></font><code class="docutils literal notranslate"><span class="pre">Meta.managed=False</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该选项通常用于建模不受Django控制的数据库视图和表。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您想要更改模型的仅Python行为，但保留与原始字段相同的字段，请使用</font></font><code class="docutils literal notranslate"><span class="pre">Meta.proxy=True</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这进行了设置，以便在保存数据时代理模型是原始模型的存储结构的精确副本。</font></font></li>
</ol>
</div>
</div>
<div class="section" id="s-multiple-inheritance">
<span id="s-model-multiple-inheritance-topic"></span><span id="multiple-inheritance"></span><span id="model-multiple-inheritance-topic"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多重继承</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#multiple-inheritance" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如Python的子类化一样，Django模型可以从多个父模型继承。</font><font style="vertical-align: inherit;">请记住，正常的Python名称解析规则适用。</font><font style="vertical-align: inherit;">特定名称（例如</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）出现</font><font style="vertical-align: inherit;">的第一个基类</font><font style="vertical-align: inherit;">将是使用的基类; </font><font style="vertical-align: inherit;">例如，这意味着如果多个父</font><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">包含一个</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meta</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类，则只会使用第一个类，而将忽略所有其他类。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，您不需要从多个父级继承。</font><font style="vertical-align: inherit;">这有用的主要用例是“混合”类：向每个继承混合的类添加特定的额外字段或方法。</font><font style="vertical-align: inherit;">尽量使您的继承层次结构尽可能简单明了，这样您就不必费力去找出特定信息来自哪里。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，从具有公共</font></font><code class="docutils literal notranslate"><span class="pre">id</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主键字段的</font><font style="vertical-align: inherit;">多个模型继承</font><font style="vertical-align: inherit;">将引发错误。</font><font style="vertical-align: inherit;">要正确使用多重继承，可以</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.AutoField" title="django.db.models.AutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在基本模型中</font><font style="vertical-align: inherit;">使用explicit </font><font style="vertical-align: inherit;">：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">article_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">AutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">...</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">book_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">AutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">...</span>

<span class="k">class</span> <span class="nc">BookReview</span><span class="p">(</span><span class="n">Book</span><span class="p">,</span> <span class="n">Article</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者使用共同的祖先来保持</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.AutoField" title="django.db.models.AutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这需要使用</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从每个父模型到共同祖先</font><font style="vertical-align: inherit;">的显式</font><font style="vertical-align: inherit;">来避免子项自动生成和继承的字段之间的冲突：</font></font></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Piece</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">Piece</span><span class="p">):</span>
    <span class="n">article_piece</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">Piece</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">parent_link</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">...</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">Piece</span><span class="p">):</span>
    <span class="n">book_piece</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">Piece</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">parent_link</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">...</span>

<span class="k">class</span> <span class="nc">BookReview</span><span class="p">(</span><span class="n">Book</span><span class="p">,</span> <span class="n">Article</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="s-field-name-hiding-is-not-permitted">
<span id="field-name-hiding-is-not-permitted"></span><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不允许字段名称“隐藏” </font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#field-name-hiding-is-not-permitted" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在普通的Python类继承中，子类允许覆盖父类的任何属性。</font><font style="vertical-align: inherit;">在Django中，模型字段通常不允许这样做。</font><font style="vertical-align: inherit;">如果非抽象模型基类具有调用的字段</font></font><code class="docutils literal notranslate"><span class="pre">author</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则无法创建另一个模型字段或定义</font></font><code class="docutils literal notranslate"><span class="pre">author</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从该基类继承的任何类中</font><font style="vertical-align: inherit;">调用的属性</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此限制不适用于从抽象模型继承的模型字段。</font><font style="vertical-align: inherit;">这些字段可以用另一个字段或值覆盖，或者通过设置删除</font><font style="vertical-align: inherit;">。</font></font><code class="docutils literal notranslate"><span class="pre">field_name</span> <span class="pre">=</span> <span class="pre">None</span></code><font style="vertical-align: inherit;"></font></p>
<div class="admonition warning">
<p class="first admonition-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型管理器继承自抽象基类。</font><font style="vertical-align: inherit;">覆盖由继承引用的继承字段
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/managers/#django.db.models.Manager" title="django.db.models.Manager"><code class="xref py py-class docutils literal notranslate"><span class="pre">Manager</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能会导致细微的错误。</font><font style="vertical-align: inherit;">请参阅</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/managers/#custom-managers-and-inheritance"><span class="std std-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自定义管理器和模型继承</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonition note">
<p class="first admonition-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注解</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些字段在模型中定义额外的属性，例如
 </font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义了一个额外的属性
 </font></font><code class="docutils literal notranslate"><span class="pre">_id</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加到字段名称，以及</font></font><code class="docutils literal notranslate"><span class="pre">related_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
 </font></font><code class="docutils literal notranslate"><span class="pre">related_query_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在国外的模式。</font></font></p>
<p class="last"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非更改或删除定义它的字段以使其不再定义额外属性，否则不能覆盖这些额外属性。</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在父模型中覆盖字段会导致诸如初始化新实例（指定正在初始化哪个字段</font></font><code class="docutils literal notranslate"><span class="pre">Model.__init__</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和序列化</font><font style="vertical-align: inherit;">等方面的困难
 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些是普通Python类继承不必以完全相同的方式处理的特性，因此Django模型继承和Python类继承之间的区别不是任意的。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此限制仅适用于作为</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/fields/#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例的</font><font style="vertical-align: inherit;">属性
 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您愿意，可以覆盖正常的Python属性。</font><font style="vertical-align: inherit;">它也只适用于Python看到的属性名称：如果您手动指定数据库列名称，则可以在子表和祖先模型中出现相同的列名，以进行多表继承（它们是列在两个不同的数据库表中）。</font></font></p>
<p><font style="vertical-align: inherit;"></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/exceptions/#django.core.exceptions.FieldError" title="django.core.exceptions.FieldError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FieldError</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你覆盖任何祖先模型中的任何模型字段，</font><font style="vertical-align: inherit;">Django将引发一个</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="section" id="s-organizing-models-in-a-package">
<span id="organizing-models-in-a-package"></span><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在包中组织模型</font></font><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#organizing-models-in-a-package" title="永久链接至标题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">命令创建包含</font><font style="vertical-align: inherit;">文件</font><font style="vertical-align: inherit;">的应用程序结构</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您有许多模型，则在单独的文件中组织它们可能很有用。</font></font><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/django-admin/#django-admin-startapp"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">startapp</span></code></a><font style="vertical-align: inherit;"></font><code class="docutils literal notranslate"><span class="pre">models.py</span></code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此，请创建一个</font></font><code class="docutils literal notranslate"><span class="pre">models</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包。</font><font style="vertical-align: inherit;">删除</font></font><code class="docutils literal notranslate"><span class="pre">models.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并创建一个</font></font><code class="docutils literal notranslate"><span class="pre">myapp/models/</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font></font><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件和存储模型的文件</font><font style="vertical-align: inherit;">的
 </font><font style="vertical-align: inherit;">目录</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您必须导入</font></font><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">的模型</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果你有</font></font><code class="docutils literal notranslate"><span class="pre">organic.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="docutils literal notranslate"><span class="pre">synthetic.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code class="docutils literal notranslate"><span class="pre">models</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目录中：</font></font></p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MYAPP /模型/ __ init__.py中有所</font></font></span><a class="headerlink" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#id11" title="永久链接至代码"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a><span class="btn-clipboard" title="复制此代码"><i class="icon icon-clipboard"></i></span></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.organic</span> <span class="kn">import</span> <span class="n">Person</span>
<span class="kn">from</span> <span class="nn">.synthetic</span> <span class="kn">import</span> <span class="n">Robot</span>
</pre></div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式导入每个模型而不是使用</font><font style="vertical-align: inherit;">
具有不会使命名空间混乱，使代码更具可读性以及保持代码分析工具有用的优点。</font></font><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">.models</span> <span class="pre">import</span> <span class="pre">*</span></code><font style="vertical-align: inherit;"></font></p>
<div class="admonition seealso">
<p class="first admonition-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参见</font></font></p>
<dl class="last docutils">
<dt><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/ref/models/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型参考</font></font></span></a></dt>
<dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">涵盖所有与模型相关的API，包括模型字段，相关对象和</font></font><code class="docutils literal notranslate"><span class="pre">QuerySet</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></dd>
</dl>
</div>
</div>
</div>

</div>



<div class="browse-horizontal">
  
  <div class="left"><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/"><i class="icon icon-chevron-left"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 模型和数据库</font></font></a></div>
  
  
  <div class="right"><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行查询 </font></font><i class="icon icon-chevron-right"></i></a></div>
  
</div>



        <a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#top" class="backtotop"><i class="icon icon-chevron-up"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 回到顶部</font></font></a>
      </div>

      
<h1 class="visuallyhidden"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加信息</font></font></h1>
<div role="complementary">
  
  

<form action="https://docs.djangoproject.com/zh-hans/2.2/search/" class="search form-input" role="search">
  <label class="visuallyhidden" for="id_q"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索：</font></font></label>
    <input type="search" name="q" placeholder="搜索 2.2 文档" id="id_q">

    <button type="submit">
      <i class="icon icon-search"></i>
      <span class="visuallyhidden"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索</font></font></span>
    </button>
</form>

  

  


  <div class="fundraising-sidebar">
    <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持Django！</font></font></h2>

    <div class="small-heart">
      <img src="./11模型_files/small-fundraising-heart.d255f6e934e5.png" alt="支持Django！">
    </div>

    <div class="small-cta">
      <ul class="list-links-small">
        <li><a href="https://www.djangoproject.com/fundraising/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Marc Tamlyn捐赠给Django软件基金会以支持Django开发。</font><font style="vertical-align: inherit;">今天捐款！
        </font></font></a></li>
      </ul>
    </div>
  </div>



  
    <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容</font></font></h2>
    
    <ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型</font></font></a><ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#quick-example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快速上手</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#using-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用模型</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#fields"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font></font></a><ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#field-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段类型</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#field-options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段选项</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#automatic-primary-key-fields"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动设置主键</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#verbose-field-names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备注名</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#relationships"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关联关系</font></font></a><ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#many-to-one-relationships"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对一的关系</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#many-to-many-relationships"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对多的关系</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#extra-fields-on-many-to-many-relationships"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在多对多（多对多）关系中添加添加额外的属性字段</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#one-to-one-relationships"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一对一的关系</font></font></a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#models-across-files"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跨文件模型</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#field-name-restrictions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段命名限制</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#custom-field-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自定义的字段类型</font></font></a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-options"><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 选项</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#model-attributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型属性</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#model-methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型方法</font></font></a><ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#overriding-predefined-model-methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">覆盖预定义的模型方法</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#executing-custom-sql"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行自定义SQL</font></font></a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#model-inheritance"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型继承</font></font></a><ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#abstract-base-classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抽象基类</font></font></a><ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-inheritance"><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 遗产</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#be-careful-with-related-name-and-related-query-name"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小心</font></font><code class="docutils literal notranslate"><span class="pre">related_name</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="docutils literal notranslate"><span class="pre">related_query_name</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#multi-table-inheritance"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多表继承</font></font></a><ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#meta-and-multi-table-inheritance"><code class="docutils literal notranslate"><span class="pre">Meta</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 和多表继承</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#inheritance-and-reverse-relations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">继承与反向关系</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#specifying-the-parent-link-field"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定父链接字段</font></font></a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#proxy-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理模型</font></font></a><ul>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#querysets-still-return-the-model-that-was-requested"><code class="docutils literal notranslate"><span class="pre">QuerySet</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仍然返回所请求的模型</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#base-class-restrictions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基类限制</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#proxy-model-managers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理模型管理器</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#differences-between-proxy-inheritance-and-unmanaged-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理继承和非托管模型之间的差异</font></font></a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#multiple-inheritance"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多重继承</font></font></a></li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#field-name-hiding-is-not-permitted"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段名称“隐藏”是不允许的</font></font></a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/#organizing-models-in-a-package"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在包中组织模型</font></font></a></li>
</ul>
</li>
</ul>

    
  

  
  <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览</font></font></h2>
  <ul>
    
    
    <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一个：</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型和数据库</font></font></a></li>
    
    
    <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个：</font></font><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行查询</font></font></a></li>
    
    <li><a href="https://docs.djangoproject.com/zh-hans/2.2/contents/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></a></li>
    
    <li><a href="https://docs.djangoproject.com/zh-hans/2.2/genindex/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总目录</font></font></a></li>
    
    <li><a href="https://docs.djangoproject.com/zh-hans/2.2/py-modindex/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python模块索引</font></font></a></li>
    
    
  </ul>
  

  
  <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前位置</font></font></h2>
  <ul>
    <li>
      <a href="https://docs.djangoproject.com/zh-hans/2.2/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django 2.2文档</font></font></a>
      
      <ul><li><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Django</font></font></a>
      
      <ul><li><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/db/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型和数据库</font></font></a>
      
      <ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型</font></font></li></ul>
      </li></ul></li></ul>
    </li>
  </ul>
  

  
  <h2 id="getting-help-sidebar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取帮助</font></font></h2>
  <dl class="list-links">
    <dt><a href="https://docs.djangoproject.com/zh-hans/2.2/faq/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常问问题</font></font></a></dt>
    <dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尝试查看常见问题 - 它包括了很多常见问题的答案</font></font></dd>

    <dt><a href="https://docs.djangoproject.com/en/stable/genindex/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://docs.djangoproject.com/en/stable/py-modindex/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模块索引</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><a href="https://docs.djangoproject.com/en/stable/contents/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></a></dt>
    <dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查找特定信息时比较容易</font></font></dd>

    <dt><a href="https://groups.google.com/group/django-users/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">django-users邮件列表</font></font></a></dt>
    <dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在django-users邮件列表存档中搜索信息，或者发布一个问题。</font></font></dd>

    <dt><a href="irc://irc.freenode.net/django"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#django IRC频道</font></font></a></dt>
    <dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在#django IRC频道上提问，或者搜索IRC历史找到相似的问题与解答。</font></font></dd>

    <dt><a href="https://code.djangoproject.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">票务跟踪器</font></font></a></dt>
    <dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们的`ticket tracker`_中报告Django或Django文档的Bug。</font></font></dd>
  </dl>
  

  
  <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载：</font></font></h2>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    离线（Django 2.2）：
     </font></font><a href="https://media.djangoproject.com/docs/django-docs-2.2-zh-hans.zip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |
    </font></font><a href="https://media.readthedocs.org/pdf/django/2.2.x/django.pdf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PDF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |
    </font></font><a href="https://media.readthedocs.org/epub/django/2.2.x/django.epub"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ePub </font></font></a>
    <br>
    <span class="quiet"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由</font></font><a href="https://readthedocs.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供。
    </font></font></span>
  </p>
  
</div>

      

    </div>

     
     

    
    
    

    
      
<div role="contentinfo">
  <div class="subfooter">
    <div class="container">
      <h1 class="visuallyhidden"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django链接</font></font></h1>

      <div class="col learn">
        <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">学到更多</font></font></h2>
        <ul>
          <li><a href="https://www.djangoproject.com/start/overview/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于Django</font></font></a></li>
          
          <li><a href="https://www.djangoproject.com/start/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django入门</font></font></a></li>
          <li><a href="https://docs.djangoproject.com/en/dev/internals/organization/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">团队组织</font></font></a></li>
          <li><a href="https://www.djangoproject.com/foundation/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django软件基金会</font></font></a></li>
          <li><a href="https://www.djangoproject.com/conduct/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行为守则</font></font></a></li>
          <li><a href="https://www.djangoproject.com/diversity/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多元化声明</font></font></a></li>
        </ul>
      </div>

      <div class="col involved">
        <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参与其中</font></font></h2>
        <ul>
          <li><a href="https://www.djangoproject.com/community/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加入一个小组</font></font></a></li>
          <li><a href="https://docs.djangoproject.com/en/dev/internals/contributing/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">贡献Django</font></font></a></li>
          <li><a href="https://docs.djangoproject.com/en/dev/internals/contributing/bugs-and-features/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提交一个Bug</font></font></a></li>
          <li><a href="https://docs.djangoproject.com/en/dev/internals/security/#reporting-security-issues"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报告安全问题</font></font></a></li>
        </ul>
      </div>

      <div class="col follow last-child">
        <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跟着我们</font></font></h2>
        <ul>
          <li><a href="https://github.com/django"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub上</font></font></a></li>
          <li><a href="https://twitter.com/djangoproject"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推特</font></font></a></li>
          <li><a href="https://www.djangoproject.com/rss/weblog/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新闻RSS</font></font></a></li>
          <li><a href="https://groups.google.com/forum/#!forum/django-users"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django用户邮件列表</font></font></a></li>
        </ul>
      </div>

    </div>
  </div>

  <div class="footer">
    <div class="container">
      <div class="footer-logo">
        <a class="logo" href="https://www.djangoproject.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django的</font></font></a>
      </div>
      <ul class="thanks">
        <li>
          <span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font></span> <font style="vertical-align: inherit;"><a class="rackspace" href="https://www.rackspace.com/"><font style="vertical-align: inherit;">Rackspace </font></a><span><font style="vertical-align: inherit;">托管</font></span></font><a class="rackspace" href="https://www.rackspace.com/"><font style="vertical-align: inherit;"></font></a>
        </li>
        <li class="design"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font></span> <a class="threespot" href="https://www.threespot.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Threespot </font></font></a> <font style="vertical-align: inherit;"><span><font style="vertical-align: inherit;">设计</font></span></font><span class="ampersand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＆</font></font></span> <a class="andrevv" href="http://andrevv.com/"></a></li>
      </ul>
      <p class="copyright"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">©2005-2019
         </font></font><a href="https://www.djangoproject.com/foundation/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django Software Foundation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和个人贡献者。</font><font style="vertical-align: inherit;">Django是</font><font style="vertical-align: inherit;">Django Software Foundation </font><font style="vertical-align: inherit;">的
         </font></font><a href="https://www.djangoproject.com/trademarks/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注册商标</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p>
    </div>
  </div>

</div>

    

    
    <script>
    function extless(input) {
        return input.replace(/(.*)\.[^.]+$/, '$1');
    }
    var require = {
        shim: {
            'jquery': [],
            'jquery.inview': ["jquery"],
            'jquery.payment': ["jquery"],
            'jquery.flot': ["jquery"],
            'jquery.unveil': ["jquery"],
            'stripe': {
              exports: 'Stripe'
            }
        },
        paths: {
            "jquery": extless("https://static.djangoproject.com/js/lib/jquery/dist/jquery.min.87e69028f78d.js"),
            "jquery.inview": extless("https://static.djangoproject.com/js/lib/jquery.inview/jquery.inview.min.4edba1c65592.js"),
            "jquery.payment": extless("https://static.djangoproject.com/js/lib/jquery.payment/lib/jquery.payment.e99c05ca79ae.js"),
            "jquery.unveil": extless("https://static.djangoproject.com/js/lib/unveil/jquery.unveil.min.ac79eb277093.js"),
            "jquery.flot": extless("https://static.djangoproject.com/js/lib/jquery-flot/jquery.flot.min.9964206e9d7f.js"),
            "clipboard": extless("https://static.djangoproject.com/js/lib/clipboard/dist/clipboard.min.bd70fd596a23.js"),
            "mod/floating-warning": extless("https://static.djangoproject.com/js/mod/floating-warning.a21b2abd2884.js"),
            "mod/list-collapsing": extless("https://static.djangoproject.com/js/mod/list-collapsing.c1a08d3ef9e9.js"),
            "mod/list-feature": extless("https://static.djangoproject.com/js/mod/list-feature.73529480f25b.js"),
            "mod/mobile-menu": extless("https://static.djangoproject.com/js/mod/mobile-menu.841726ee903a.js"),
            "mod/version-switcher": extless("https://static.djangoproject.com/js/mod/version-switcher.c28bb83972bb.js"),
            "mod/search-key": extless("https://static.djangoproject.com/js/mod/search-key.f3c0a6fcfedd.js"),
            "mod/stripe-custom-checkout": extless("https://static.djangoproject.com/js/mod/stripe-custom-checkout.aac1352045b7.js"),
            "mod/stripe-change-card": extless("https://static.djangoproject.com/js/mod/stripe-change-card.682c710317a8.js"),
            "mod/console-tabs": extless("https://static.djangoproject.com/js/mod/console-tabs.70ce882faaf3.js"),
            "stripe-checkout": "https://checkout.stripe.com/checkout",
            "stripe": "https://js.stripe.com/v2/?"  // ? needed due to require.js
        }
    };
    </script>
    <script data-main="https://static.djangoproject.com/js/main.07884ebc4865.js" src="./11模型_files/require.177879fbe7dd.js"></script><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./11模型_files/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>
    



  

<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>